---
layout: post
title: ps2avrU 펌웨어 정보
published: true
author: showjean
comments: true
date: 2013-06-30 10:06:42
tags: [ ]
categories:
    - '%ec%a0%95%eb%b3%b4'
permalink: /87
---
*** ps2avrU란?**



&#8211; USB /&nbsp;PS/2 콤보 펌웨어입니다.

&#8211; PS/2 키보드 펌웨어인&nbsp;ps2avr과 USB키보드 펌웨어인 dulcimer를 조합하여 만든 펌웨어입니다.

&#8211; 프로젝트 링크


  ps2avr :&nbsp;http://ps2avr.sourceforge.net/



  dulcimer :&nbsp;http://www.schatenseite.de/dulcimer.html?L=2




(ps2avr 시리즈의 기판은 확장 모듈(ps2avr-ext)를 함께 사용해야 USB인터페이스를 이용할 수 있습니다.)





*** 두 인터페이스의 차이점**



&nbsp;USB


  &#8211; 6+1키 동시입력



  &#8211; 보통의 키&nbsp;반복 속도




&nbsp;PS/2&nbsp;


  &#8211; 무한 동시입력



  &#8211; 빠른 키 반복&nbsp;속도








*** 인터페이스 전환 방법**



&#8211; 기본적으로 USB로 설정되어있습니다.

&#8211;&nbsp;PS/2 로 선택하려면 &#8220;P&#8221;키를 누른 상태에서 PS/2 포트에 연결합니다.

&nbsp; (보통 PS/2 포트는 핫플러그를 지원하지 않기 때문에 USB 포트에 PS/2모드로 선택만 한 후, 컴퓨터 전원 off -> PS/2 연결 -> 부팅 순으로 이용하시는 것이 좋습니다.)

&#8211; 이렇게 수동으로 인터페이스를 선택하면 이후에 재 접속해도 다시 그 인터페이스로만 작동을 합니다.

&#8211; USB로 설정하려면&nbsp;&#8220;U&#8221;키를 누른 상태에서 USB포트에 연결하면 됩니다.



&#8211; 인터페이스 인식 표시는 CapsLock/NumLock LED의 깜박이는 수로 확인 가능합니다.


  -> 1번 깜박인 후 키보드 동작 : PS/2로 인식된 상태



  -> 깜박임 없이 키보드 동작 : USB로 인식된 상태








*** 기본 기능**



&#8211; Full LED 지원

&#8211; LED 모드 변경키 : ESC + caps lock

1. LED off &#8211; &nbsp;꺼짐

2. fading &#8211; 숨쉬기

3. on &#8211; 계속 켜짐

4. key down level up &#8211; 키 입력이 잦을수록 밝아짐

5. key down level down &#8211; 키 입력이 잦을수록 어두워짐



&#8211; full LED의 최대 밝기는 조절할 수 있는 기능 키

KEY\_LED\_UP : 최대 밝기 증가

KEY\_LED\_DOWN : 최대 밝기 감소



기본적으로 다음의 위치에 매핑되어 있습니다.

A.87 및 MX-mini 시리즈 : FN + -(감소) / FN + =(증가)

thumb 시리즈 : FN + R Alt(감소) / FN + R Ctrl(증가)



&#8211; 4 Layer 키맵

1. normal

2. FN

-> FN키를 누르고 있는 동안&nbsp;작동되는 레이어

3. FN2/FN3

-> FN2/FN3키를 누르고 있는 동안 FN2/FN3레이어가 유지됩니다.

-> &#8220;TOGGLE\_FN2/TOGGLE\_FN3&#8243;키로 매핑된 키를 이용하면&nbsp;FN2/FN3레이어로 유지됩니다.&nbsp;

-> toggle on/off를 caps lock/num lock LED의 깜박임 수로 표시합니다. on/off 각 2번/1번 점멸 합니다.

(하드웨어 메뉴의 옵션을 설정하여 NumLock LED를 FN2/FN3의 인디케이터로 대신 사용할 수 있습니다.)

-> normal 레이어로 복귀하려면 다시 &#8220;TOGGLE\_FN2/TOGGLE\_FN3&#8221; 키를 다시 누르거나 ESC+Backspace를 누르면 됩니다.





&#8211; Scroll Lock LED 표시(ps2avr 이전 기판)

1. Scroll Lock LED는 별도로 존재하지 않고, on/off시 CapsLock LED가 각각 2번/1번 깜빡이며 표시됩니다.

2. 펌웨어 파일 중 SL_apart라고 이름이 붙은 것은 MCU의 PD6핀으로 Scroll Lock LED 신호가 출력됩니다. 이 핀에 330옴 정도의 저항을 직결 한 후 LED를 연결해 주면 on/off에 따라서 점멸 됩니다.

-> PD6 핀은 MCU의 15번째 핀입니다. 링크의 그림을 참고하세요.

https://raw2.github.com/showjean/ps2avrU/master/firmware/ps2avrU/Circuit/circut\_20131031\_040055_001.png

-> Scroll Lock LED 분리하기 팁 :&nbsp;http://blog.winkeyless.kr/126



&#8211; Sleep Mode : USB로 연결 시 시스템이 종료 되면 슬립 모드로 전환되어 모든 LED가 off 됩니다.





*** 키 매핑 지원**



&#8211; 애플리케이션(부트 매퍼)을 이용해 키 매핑을 간단히 할 수 있습니다.

&#8211; 사용법 :&nbsp;http://blog.winkeyless.kr/90





*** 하드웨어 키 매핑 지원**



&#8211; 사용자가 원하는 키 값으로 모든 키를 매핑할 수 있습니다.

&#8211; 사용법 :&nbsp;http://blog.winkeyless.kr/46







*** 하드웨어 매크로 지원**



&#8211; 사용자가 원하는 키에 매크로를 등록할 수 있습니다.

&#8211; 사용법 :&nbsp;http://blog.winkeyless.kr/55





*** 퀵 매크로 지원**



&#8211; 하드웨어 메뉴를 거치지 않고 원하는 하드웨어 매크로(KEY_MAC1~12)에 빠르게 매크로를 설정할 수 있는 기능

: QM(Quick Macro)키 + 원하는 매크로 키(KEY_MAC1~12) 를 누르고 모든 키에서 손을 떼면 caps lock LED가 길게 2번 반짝이며 저장을 시작합니다.

: 이 상태에서 원하는 키 조합을 입력하고 다시 QM키를 누르면 caps lock LED가 길게 1번 반짝이며 매크로 저장이 종료 됩니다.

: 해당 매크로키(KEY_MAC1~12)를 누르면 저장 된 키 조합이 출력됩니다.

: 퀵 매크로는 하드웨어 메뉴에서 저장하는 하드웨어 매크로에만 해당되며 커스텀 매크로에는 적용 되지 않습니다.





*** Custom Macro 지원**



&#8211; 부트 매퍼 사이트에 추가된 &#8220;Custom Macro&#8221;탭을 이용하여 매크로를 편집 후 .hex파일을 생성하고 부트로더를 이용해 키보드에 업로드합니다.

&#8211; CST Mac1~12 키로 매크로를 작동 시킵니다.

&#8211; 사용 방법 :&nbsp;http://blog.winkeyless.kr/125





*** 퀵 스왑 기능**

&#8211; 퀵 스왑 적용(ALT&nbsp; GUI) : ALT+GUI+R shift 를 동시에 누르고 5초간 유지하면 두 키(ALT  GUI)의 위치가 뒤바뀝니다. (적용시 캡스락/넘락 LED가 2회/1회 깜빡이며 표시)





*** PS/2 키 반복 속도 조절**

&#8211;&nbsp;숫자 1~3키 하나를 누른 상태로 케이블 연결(전원 ON) 하여 키 반복 속도를 조절 합니다.

&#8211; 1은 기본 속도(빠름), 2 = 조금 빠름, 3 = 보통 속도

&#8211; 설정 값은 저장 되어 다시 설정하기 전까지 유지됩니다.



*** Dual action key&nbsp;**

&#8211; 이 키들은 키 기본적으로 조합 키로 작동합니다. 다만, 다른키와 조합하지 않고 하나만 눌렀다 때면(down->up) 한/영 이나 한자 등의 키가 입력됩니다.



예를 들어, &#8220;FN + Capslock&#8221; 키를 누른 상태에서 다른 키들을 누르면 FN 레이어 키로 작동하지만, 이 키만 단독으로 눌렀다 때면 Capslock&nbsp;키로 작동합니다.&nbsp;



부트맵퍼를 통해서 여러가지 조합의 듀얼 액션 키를 설정 할 수 있습니다.



&#8211; dual action key 작동 방식

: 누른 상태로 잠시(약 0.5초) 있어야 조합키가 작동된다.

: 다른 키와 조합하면 딜레이와 관계없이 조합키로 작동된다.

: 단독 키(한/영 등)로 사용하려면 눌렀다 떼는 행동을 약0.5초 안에 해야 된다.

= 예를 들어 &#8220;(R alt + 한/영)&#8221;키를 이용시 한/영 을 사용하고 싶다면 0.5초 내에 다운/업을 해야 하고,&nbsp;

R alt를 누르고 싶다면 0.5초 동안 누르고 있거나, 다른 키들과 조합을 하면 된다.



&#8211; 윈도우즈의 키보드 설정이 101키로 되어 있는 경우 R Alt가 한/영, RCtrl이 한자 키로 작동하기 때문에 위 키들 중에 해당 사항이 있는 키(R alt + 한/영 등)는 듀얼 액션으로 작동되지 않습니다.



-= FN, FN2, FN3 키 처럼 레이어가 변경되는 키는 해당 레이어의 같은 위치에도 같은 키코드로 매핑을 해줘야 정상 작동합니다.





* Lock Key/Win 키

&#8211; Lock Key 키는 키보드의 모든 입력을 차단합니다.

&#8211; Lock Win 키는 좌/우 윈도우 키의 입력을 차단합니다.

&#8211; 두 키 모두 토글 방식으로 작동하며, 전원이 차단되면 모두 off 상태(차단하지 않는 상태)가 됩니다.







*** 게으른 FN**

&#8211; 게으른 FN(lazy FN) 옵션을 on 시키면 키 입력 중에는 레이어 변경이 되지 않습니다.&nbsp;

&#8211; 해당 옵션은 하드웨어 메뉴에서 설정할 수 있습니다.

예를 들어, FN+1을 눌러 FN 레이어의 F1키를 작동 중이었을때 FN키만을 떼고 1키만을 계속 누르고 있으면 F1이 아닌 1키가 입력되게 됩니다. 하지만, 게으른 FN 옵션을 on시킨&nbsp;상태라면 같은 상황에서 FN키를 떼도 F1이 계속 입력됩니다.



&#8211; 현재는 옵션 변경 없이 기본값으로 게이른 FN이 적용 되어 있습니다.





*** &nbsp;Shift + Esc = ~**

&#8211; 미니키보드에서 입력이 불편했던 ~를 Shift + Esc를 누르면 입력되도록 키 매퍼 옵션 추가

&#8211; 하드웨어 메뉴의 &#8220;esc to ~&#8221; 옵션을 &#8220;on&#8221;으로 변경하면 shift+esc 입력시 ~가 입력됩니다.







&#8211; 하드웨어 메뉴 사용&nbsp;방법(ps2avrU 전용)

1. 메모장 같은 타이핑이 가능한 편집기를 PC에 실행 시킵니다.

2. L ctrl + alt + shift + R shift(총 4키)를 약 5초간 누르고 있다 떼면 문자가 타이핑 되면서 메뉴가 표시됩니다.

3. 내용은 아래와 같습니다.


  
    hello
  
  
  
  
  
  
    select mode
  
  
  
    1:keymapper
  
  
  
    2:macro
  
  
  
    4:fn2/3 led : sl
  
  
  
    5:esc to ~ : off
  
  
  
    7:exit
  
  
  
    9:boot mapper
  
  
  
    >>
  








*** 펌웨어 및 소스 링크**



http://blog.winkeyless.kr/17